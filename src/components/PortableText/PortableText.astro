---
import { PortableText as PT, Mark } from "astro-portabletext"
import { mergeComponents } from "astro-portabletext/utils"
import Block from "./Block.astro"
import List from "./List.astro"
import ListItem from "./ListItem.astro"
// import Mark from "./Mark.astro"
import Type from "./Type.astro"

type PortableTextProps = Parameters<typeof PT>[0]

export type Props = Pick<PortableTextProps, "value" | "components">

const defaultComponents = {
  block: Block,
  list: List,
  listItem: ListItem,
  type: Type,
  mark: Mark,
}

const { value, components = {} } = Astro.props

const portableTextProps = {
  value: value,
  components: mergeComponents(defaultComponents, components),
}
---

<PT {...portableTextProps} />
